{if $products_history_block eq 'true'}
{section name=i loop=$history_products}
  {if $smarty.section.i.first}
 <table border="0" width="100%" cellspacing="0" cellpadding="0">
  <tr>
    <td height="14" class="infoBoxHeading"><img src="{$theme_image}/infobox/corner_left.gif" border="0" alt="" width="11" height="14"></td>
    <td height="14" class="infoBoxHeading" width="100%">{$lang.table_heading_products_history}</td>
    <td height="14" class="infoBoxHeading"><img src="{$theme_image}/infobox/corner_right_left.gif" border="0" alt="" width="11" height="14"></td>
  </tr>
</table>
<table border="0" width="100%" cellspacing="0" cellpadding="1" class="infoBox">
  <tr>
    <td><table border="0" width="100%" cellspacing="0" cellpadding="4" class="infoBoxContents">
  <tr>
  {/if}
    <td align="center" width="33%" class="smallText"><a href="{product_info_link products_id=$history_products[i].products_id}">{html_oos_image basedir=$smarty.const.OOS_IMAGES image=$history_products[i].products_image alt=$history_products[i].products_name height=$smarty.const.SMALL_IMAGE_HEIGHT width=$smarty.const.SMALL_IMAGE_WIDTH}</a><br /><a href="{product_info_link products_id=$history_products[i].products_id}">{$history_products[i].products_name}</a></td>
  {if $smarty.section.i.rownum is div by 3}
    </tr>
    <tr>
  {/if}
  {if $smarty.section.i.last}
</table>
</td>
  </tr>
</table>
  {/if}
{/section}
{/if}